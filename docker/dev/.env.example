# =============================================================================
# BodaInsure Docker Development Environment - Example Configuration
# =============================================================================
# Copy this file to .env and customize as needed:
#   cp .env.example .env
#
# This is the SINGLE SOURCE OF TRUTH for all Docker development configuration.
# =============================================================================

# =============================================================================
# INFRASTRUCTURE CONFIGURATION
# =============================================================================

# PostgreSQL Database
DB_HOST=postgres
DB_PORT=5432
DB_USERNAME=bodainsure
DB_PASSWORD=bodainsure
DB_NAME=bodainsure
DB_SSL=false
DB_LOGGING=true
DB_POOL_SIZE=10

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# MinIO (S3-compatible storage)
MINIO_ROOT_USER=bodainsure
MINIO_ROOT_PASSWORD=bodainsure123

# pgAdmin (optional)
PGADMIN_EMAIL=admin@bodainsure.co.ke
PGADMIN_PASSWORD=admin123

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

NODE_ENV=development
PORT=3000
API_PREFIX=api/v1

# JWT Authentication
# IMPORTANT: Change JWT_SECRET for production!
JWT_SECRET=docker-dev-secret-change-in-production-min-32-chars
JWT_EXPIRES_IN=30d
JWT_REFRESH_EXPIRES_IN=90d
JWT_ALGORITHM=HS256

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# CORS
CORS_ORIGIN=http://localhost:5173,http://client:5173,http://localhost:3000

# =============================================================================
# ENCRYPTION & SECURITY
# =============================================================================

# Encryption key for PII (AES-256-GCM)
# IMPORTANT: Generate a new key for production: openssl rand -base64 32
ENCRYPTION_KEY=MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDE=

# =============================================================================
# EMAIL CONFIGURATION (MailHog)
# =============================================================================

EMAIL_ENABLED=true
EMAIL_FROM=BodaInsure <noreply@bodainsure.co.ke>
EMAIL_REPLY_TO=support@bodainsure.co.ke
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USER=
SMTP_PASS=
SMTP_SECURE=false

# =============================================================================
# OBJECT STORAGE (MinIO)
# =============================================================================

STORAGE_PROVIDER=aws
STORAGE_BUCKET=bodainsure-documents
AWS_ACCESS_KEY_ID=bodainsure
AWS_SECRET_ACCESS_KEY=bodainsure123
AWS_REGION=us-east-1
AWS_S3_BUCKET=kyc-documents
AWS_S3_ENDPOINT=http://minio:9000
AWS_S3_FORCE_PATH_STYLE=true

# =============================================================================
# EXTERNAL SERVICES (Disabled by default)
# =============================================================================

# M-Pesa
MPESA_ENABLED=false
MPESA_ENVIRONMENT=sandbox
MPESA_CONSUMER_KEY=YOUR_SANDBOX_CONSUMER_KEY
MPESA_CONSUMER_SECRET=YOUR_SANDBOX_CONSUMER_SECRET
MPESA_SHORTCODE=174379
MPESA_PASSKEY=bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919
MPESA_CALLBACK_URL=https://localhost:3000/api/v1/payments/mpesa/callback
MPESA_B2C_SHORTCODE=600998
MPESA_B2C_INITIATOR_NAME=testapi
MPESA_B2C_SECURITY_CREDENTIAL=YOUR_B2C_SECURITY_CREDENTIAL
MPESA_B2C_RESULT_URL=https://localhost:3000/api/v1/payments/mpesa/b2c/result
MPESA_B2C_QUEUE_TIMEOUT_URL=https://localhost:3000/api/v1/payments/mpesa/b2c/timeout

# SMS Gateway
SMS_ENABLED=false
SMS_PRIMARY_PROVIDER=africastalking
SMS_FALLBACK_PROVIDER=advantasms
SMS_MAX_RETRIES=3
SMS_RETRY_DELAY_MS=1000

# Africa's Talking
AT_ENABLED=false
AT_API_KEY=YOUR_AT_API_KEY
AT_USERNAME=sandbox
AT_SENDER_ID=BodaInsure
AT_USSD_CALLBACK_URL=https://localhost:3000/api/v1/ussd/africastalking

# Advantasms
ADVANTASMS_ENABLED=false
ADVANTASMS_BASE_URL=https://quicksms.advantasms.com/api/services
ADVANTASMS_API_KEY=YOUR_ADVANTASMS_API_KEY
ADVANTASMS_PARTNER_ID=YOUR_ADVANTASMS_PARTNER_ID
ADVANTASMS_SENDER_ID=BodaInsure
ADVANTASMS_USSD_CALLBACK_URL=https://localhost:3000/api/v1/ussd/advantasms

# WhatsApp Business API
WHATSAPP_ENABLED=false
WHATSAPP_ACCESS_TOKEN=YOUR_WHATSAPP_ACCESS_TOKEN
WHATSAPP_PHONE_NUMBER_ID=YOUR_PHONE_NUMBER_ID
WHATSAPP_BUSINESS_ACCOUNT_ID=YOUR_BUSINESS_ACCOUNT_ID
WHATSAPP_API_VERSION=v18.0

# USSD Gateway
USSD_ENABLED=false
USSD_PRIMARY_PROVIDER=africastalking
USSD_SHORTCODE=*384*123#
USSD_SERVICE_CODE=*384*123#

# =============================================================================
# SCHEDULER & QUEUE
# =============================================================================

SCHEDULER_ENABLED=true
GRACE_PERIOD_DAYS=7
QUEUE_DEFAULT_ATTEMPTS=3
QUEUE_DEFAULT_BACKOFF=exponential

# =============================================================================
# CLIENT CONFIGURATION (Vite)
# =============================================================================

DOCKER_ENV=true
VITE_API_URL=http://localhost:3000/api/v1
VITE_APP_NAME=BodaInsure Admin
VITE_SESSION_TIMEOUT=30
VITE_ENABLE_MOCK_DATA=false
