# BodaInsure Platform - Environment Configuration
# Copy this file to .env and update values for your environment

# Application
NODE_ENV=development
PORT=3000
API_PREFIX=api/v1

# Database (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=bodainsure
DB_PASSWORD=bodainsure
DB_NAME=bodainsure
DB_SSL=false
DB_LOGGING=true
DB_POOL_SIZE=10

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# JWT
JWT_SECRET=your-super-secret-key-change-in-production
JWT_EXPIRES_IN=30d
JWT_REFRESH_EXPIRES_IN=90d

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# CORS
CORS_ORIGIN=http://localhost:3000,http://localhost:5173

# M-Pesa (Daraja API) - Sandbox credentials for testing
# For production: obtain credentials from Safaricom Daraja portal (https://developer.safaricom.co.ke)
MPESA_ENABLED=false
MPESA_ENVIRONMENT=sandbox

# STK Push (Lipa Na M-Pesa Online) - for receiving payments
MPESA_CONSUMER_KEY=YOUR_SANDBOX_CONSUMER_KEY
MPESA_CONSUMER_SECRET=YOUR_SANDBOX_CONSUMER_SECRET
MPESA_SHORTCODE=174379
MPESA_PASSKEY=bfb279f9aa9bdbcf158e97dd71a467cd2e0c893059b10f78e6b72ada1ed2c919
MPESA_CALLBACK_URL=https://your-domain.com/api/v1/payments/mpesa/callback

# B2C (Business to Customer) - for refunds and disbursements
MPESA_B2C_SHORTCODE=600XXX
MPESA_B2C_INITIATOR_NAME=testapi
MPESA_B2C_SECURITY_CREDENTIAL=YOUR_B2C_SECURITY_CREDENTIAL
MPESA_B2C_RESULT_URL=https://your-domain.com/api/v1/payments/mpesa/b2c/result
MPESA_B2C_QUEUE_TIMEOUT_URL=https://your-domain.com/api/v1/payments/mpesa/b2c/timeout

# Sandbox Test URLs (for local development with ngrok or similar)
# MPESA_CALLBACK_URL=https://xxxxx.ngrok.io/api/v1/payments/mpesa/callback
# MPESA_B2C_RESULT_URL=https://xxxxx.ngrok.io/api/v1/payments/mpesa/b2c/result

# SMS Gateway Configuration
SMS_ENABLED=false
SMS_PRIMARY_PROVIDER=africastalking
SMS_FALLBACK_PROVIDER=advantasms
SMS_MAX_RETRIES=3
SMS_RETRY_DELAY_MS=1000

# Africa's Talking SMS Provider
# Register at: https://account.africastalking.com/
AT_ENABLED=false
AT_API_KEY=YOUR_AT_API_KEY
AT_USERNAME=sandbox
AT_SENDER_ID=BodaInsure

# Advantasms SMS Provider (Fallback)
# Register at: https://www.advantasms.com/
ADVANTASMS_ENABLED=false
ADVANTASMS_BASE_URL=https://quicksms.advantasms.com/api/services
ADVANTASMS_API_KEY=YOUR_ADVANTASMS_API_KEY
ADVANTASMS_PARTNER_ID=YOUR_ADVANTASMS_PARTNER_ID
ADVANTASMS_SENDER_ID=BodaInsure

# WhatsApp Business API (Meta)
# Setup at: https://developers.facebook.com/docs/whatsapp/business-api
WHATSAPP_ENABLED=false
WHATSAPP_ACCESS_TOKEN=YOUR_WHATSAPP_ACCESS_TOKEN
WHATSAPP_PHONE_NUMBER_ID=YOUR_PHONE_NUMBER_ID
WHATSAPP_BUSINESS_ACCOUNT_ID=YOUR_BUSINESS_ACCOUNT_ID
WHATSAPP_API_VERSION=v18.0

# Object Storage Configuration
# Supported providers: aws, gcp, azure, local
STORAGE_PROVIDER=local
STORAGE_LOCAL_PATH=./uploads

# AWS S3 (when STORAGE_PROVIDER=aws)
AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
AWS_REGION=af-south-1
AWS_S3_BUCKET=bodainsure-documents

# Google Cloud Storage (when STORAGE_PROVIDER=gcp)
GCP_PROJECT_ID=your-gcp-project
GCP_BUCKET=bodainsure-documents
# GCP_CREDENTIALS_PATH=/path/to/service-account.json

# Azure Blob Storage (when STORAGE_PROVIDER=azure)
AZURE_STORAGE_CONNECTION_STRING=YOUR_AZURE_CONNECTION_STRING
AZURE_STORAGE_CONTAINER=bodainsure-documents

# Encryption (AES-256-GCM for PII)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# JWT RS256 Configuration (optional, fallback to HS256)
JWT_ALGORITHM=HS256
# JWT_PRIVATE_KEY=/path/to/private.pem
# JWT_PUBLIC_KEY=/path/to/public.pem

# Email Service (SMTP)
EMAIL_ENABLED=false
EMAIL_FROM=BodaInsure <noreply@bodainsure.co.ke>
EMAIL_REPLY_TO=support@bodainsure.co.ke
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASS=
SMTP_SECURE=false

# USSD Gateway Configuration
# Shortcode: Apply via Safaricom/Airtel or Africa's Talking USSD service
USSD_ENABLED=false
USSD_PRIMARY_PROVIDER=africastalking
USSD_SHORTCODE=*384*123#
USSD_SERVICE_CODE=*384*123#

# Africa's Talking USSD Callback (same account as SMS)
AT_USSD_CALLBACK_URL=https://your-domain.com/api/v1/ussd/africastalking

# Advantasms USSD Callback (fallback provider)
ADVANTASMS_USSD_CALLBACK_URL=https://your-domain.com/api/v1/ussd/advantasms

# Scheduler Configuration
SCHEDULER_ENABLED=true
GRACE_PERIOD_DAYS=7

# Queue Configuration (BullMQ)
QUEUE_DEFAULT_ATTEMPTS=3
QUEUE_DEFAULT_BACKOFF=exponential
